---
- name: Configure DNS Server
  hosts: DMZ1
  become: yes
  tasks:
    - name: Install BIND9 package
      ansible.builtin.apt:
        name: bind9
        state: present
    - name: Configure named.conf.options
      ansible.builtin.template:
        src: named.conf.options
        dest: /etc/bind/named.conf.options
        owner: root
        group: bind
        mode: '0644'
    - name: Configure named.conf.local
      ansible.builtin.template:
        src: named.conf.local
        dest: /etc/bind/named.conf.local
        owner: root
        group: bind
        mode: '0644'
    - name: Configure forward zone file
      ansible.builtin.template:
        src: db.example.com.j2
        dest: /etc/bind/db.example.com
        owner: root
        group: bind
        mode: '0644'
    - name: Restart BIND9 service
      ansible.builtin.service:
        name: bind9
        state: restarted
        enabled: yes
