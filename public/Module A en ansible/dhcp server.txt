---
- name: Configure DHCP Server
  hosts: DMZ1
  become: yes
  tasks:
    - name: Install DHCP  package
      ansible.builtin.apt:
        name: isc-dhcp-server
        state: present
    - name: Configure DHCP server
      ansible.builtin.template:
        src: dhcpd.conf.j2
        dest: /etc/dhcp/dhcpd.conf
        owner: root
        group: root
        mode: '0644'
    - name: Configure default interfaces 
      ansible.builtin.lineinfile:
        path: /etc/default/isc-dhcp-server
        regexp: '^INTERFACESv4='
        line: 'INTERFACESv4="eth0"'  # Remplace "eth0" par l'interface correcte
    - name: Restart DHCP server
      ansible.builtin.service:
        name: isc-dhcp-server
        state: restarted
        enabled: yes
